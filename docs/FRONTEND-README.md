# Z-RAG 前端界面说明

## 概述

Z-RAG 前端界面是一个现代化的 Web 应用，提供了完整的文档管理、知识管理和智能问答功能。界面采用响应式设计，支持桌面和移动设备。

## 功能特性

### 🎯 智能问答
- **实时对话**: 支持与AI助手的实时对话
- **上下文理解**: 基于上传文档的智能问答
- **多轮对话**: 支持连续对话，保持上下文
- **消息历史**: 保存对话历史，支持清空和新建

### 📁 文档管理
- **多格式支持**: 支持 PDF、TXT、DOC、DOCX 等格式
- **拖拽上传**: 支持拖拽文件到上传区域
- **批量上传**: 支持同时上传多个文件
- **文件预览**: 查看文件信息和状态
- **文件删除**: 支持删除不需要的文档

### 🧠 知识管理
- **统计概览**: 显示文档数量、知识片段、查询次数等统计信息
- **知识片段**: 查看文档分割后的知识片段
- **向量数据**: 显示向量存储信息
- **分析报告**: 提供使用分析和图表

### ⚙️ 系统设置
- **模型配置**: 支持千问、OpenAI、Ollama 等模型
- **参数调整**: 可调整检索参数、文档分割参数等
- **系统信息**: 显示系统版本和状态信息
- **设置保存**: 支持设置持久化保存

## 技术实现

### 前端技术栈
- **HTML5**: 语义化标记
- **CSS3**: 现代化样式，支持渐变、动画、响应式布局
- **JavaScript ES6+**: 原生JavaScript，无框架依赖
- **Font Awesome**: 图标库
- **响应式设计**: 支持桌面和移动设备

### 后端接口
- **RESTful API**: 标准的REST接口设计
- **Spring Boot**: 后端框架
- **JSON**: 数据交换格式
- **文件上传**: 支持multipart/form-data

## 文件结构

```
src/main/resources/static/
├── index.html              # 主界面
├── demo.html               # 演示页面
├── css/
│   └── style.css           # 样式文件
└── js/
    └── app.js              # 应用逻辑
```

## 启动方式

### 1. 使用前端演示脚本
```bash
./start-frontend.sh
```

### 2. 使用其他启动脚本
```bash
# 千问模型
./start-qwen.sh

# Ollama本地模型
./start-ollama.sh

# 默认启动
./start.sh
```

### 3. 访问地址
- **主界面**: http://localhost:8080
- **演示页面**: http://localhost:8080/demo.html
- **API状态**: http://localhost:8080/api/rag/status

## 界面说明

### 主界面布局
```
┌─────────────────────────────────────────────────────────┐
│ 侧边栏                    │ 主内容区                    │
│ ┌─────────────────────┐   │ ┌─────────────────────────┐ │
│ │ Z-RAG               │   │ │ 智能问答                │ │
│ │ 智能问答系统         │   │ │ 文档管理                │ │
│ │                     │   │ │ 知识管理                │ │
│ │ 智能问答            │   │ │ 系统设置                │ │
│ │ 文档管理            │   │ │                         │ │
│ │ 知识管理            │   │ │                         │ │
│ │ 系统设置            │   │ │                         │ │
│ │                     │   │ │                         │ │
│ │ 系统状态: 正常      │   │ │                         │ │
│ └─────────────────────┘   │ └─────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 智能问答界面
- **聊天区域**: 显示对话历史
- **输入框**: 支持多行输入，Enter发送，Shift+Enter换行
- **控制按钮**: 清空对话、新建对话
- **消息样式**: 用户消息和AI回复有不同的样式

### 文档管理界面
- **上传区域**: 支持拖拽和点击上传
- **文档列表**: 网格布局显示文档卡片
- **搜索排序**: 支持按名称、日期、大小排序
- **操作按钮**: 查看、删除等操作

### 知识管理界面
- **统计卡片**: 显示关键指标
- **标签切换**: 知识片段、向量数据、分析报告
- **数据展示**: 表格和图表形式展示数据

### 系统设置界面
- **表单配置**: 模型参数、检索参数等
- **系统信息**: 版本信息、状态信息
- **操作按钮**: 保存设置、重置设置

## API 接口

### 系统状态
```http
GET /api/rag/status
```

### 文档管理
```http
POST /api/rag/upload          # 上传文档
GET  /api/rag/storage/files   # 获取文件列表
DELETE /api/rag/storage/file  # 删除文件
```

### 智能问答
```http
POST /api/rag/query           # 执行查询
GET  /api/rag/retrieve        # 检索文档
```

## 响应式设计

### 桌面端 (>768px)
- 侧边栏固定宽度 280px
- 主内容区自适应
- 网格布局显示文档

### 移动端 (≤768px)
- 侧边栏变为顶部导航
- 主内容区全宽显示
- 单列布局显示文档

## 浏览器兼容性

- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 12+
- ✅ Edge 79+

## 开发说明

### 添加新功能
1. 在 `app.js` 中添加新的方法
2. 在 `index.html` 中添加对应的UI元素
3. 在 `style.css` 中添加样式
4. 在后端添加对应的API接口

### 自定义样式
- 修改 `style.css` 中的CSS变量
- 调整颜色主题、字体、间距等
- 支持暗色主题（可扩展）

### 添加新页面
1. 创建新的HTML文件
2. 添加对应的控制器方法
3. 更新导航菜单

## 故障排除

### 常见问题

1. **页面无法访问**
   - 检查后端服务是否启动
   - 确认端口8080未被占用

2. **API调用失败**
   - 检查网络连接
   - 查看浏览器控制台错误信息

3. **文件上传失败**
   - 检查文件大小限制
   - 确认文件格式支持

4. **样式显示异常**
   - 清除浏览器缓存
   - 检查CSS文件加载

### 调试方法

1. **浏览器开发者工具**
   - F12 打开开发者工具
   - 查看Console、Network、Elements等标签

2. **后端日志**
   - 查看控制台输出
   - 检查Spring Boot日志

3. **API测试**
   - 使用Postman或curl测试API
   - 访问 `/api/rag/status` 检查服务状态

## 许可证

本项目采用 [Apache License 2.0](LICENSE) 许可证。
